
<Module>
<ModulePrefs title="NYTimes.com - Top Stories" title_url="http://nytimes.com?src=igw" author="The New York Times" description="All the news you need to know online from the most authoritative source of news in the world" author_email="igoognyt@gmail.com" screenshot="http://www.nytimes.com/packages/html/igoogle/screenshot.png" thumbnail="http://www.nytimes.com/packages/html/igoogle/thumb.png">
<Require feature="dynamic-height"/>
<Require feature="views"/>
</ModulePrefs>
<UserPref name="headlineCount" display_name="Number of Stories:" default_value="5" datatype="enum">
<EnumValue value="5" display_value="5"/>
<EnumValue value="6" display_value="6"/>
<EnumValue value="7" display_value="7"/>
<EnumValue value="8" display_value="8"/>
<EnumValue value="9" display_value="9"/>
<EnumValue value="10" display_value="10"/>
</UserPref>
<UserPref name="summaryCount" display_name="Include Summaries For:" default_value="1" datatype="enum">
<EnumValue value="1" display_value="1"/>
<EnumValue value="2" display_value="2"/>
<EnumValue value="3" display_value="3"/>
<EnumValue value="4" display_value="4"/>
<EnumValue value="5" display_value="5"/>
</UserPref>
<Content type="html">
<![CDATA[
<link rel="stylesheet" type="text/css" href="http://graphics8.nytimes.com/css/app/igoogle/home-merged.css" /> <textarea style="display:none" id="summariesTemplate"> <% for (var i=0, len=stories.length; i<len; i++) { %> <% var story = stories[i]; %> <div class="story clearfix"> <% if
]]>
<![CDATA[
(story.thumbnail) { %> <div class="callout"> <img src="<%= story.thumbnail %>" /> </div> <% } %> <h4><a href="<%= story.web_url %>&src=igw" target="_blank"><%= story.hdl %></a></h4> <p class="summary"><%= story.lp %></p> </div> <% } %> </textarea> <textarea style="display:none" id="headlinesTemplate"> <% for (var i=0, len=stories.length; i<len; i++) { %> <% var story = stories[i]; %> <div class="story clearfix"> <a href="<%= story.web_url %>&src=ig" target="_blank"><%= story.hdl %></a> </div> <% } %> </textarea> <div id="content_div"> <div class="contentHolder clearfix" id="lede"></div> <div id="headlines_list" class="clearfix"></div> </div> <script src="http://graphics8.nytimes.com/js/app/igoogle/igoogle.js"></script> <script> var ig = NYT.Google; //ig.getJSON("http://www.nytimes.com/services/xml/rss/nyt/HomePage.json?211", function(json) { _IG_FetchContent("http://www.nytimes.com/services/json/nyt/HomePage.json", function(json) { var prefs = new _IG_Prefs(); var headlineLimit = prefs.getInt("headlineCount"); var summariesLimit = prefs.getInt("summaryCount"); var results = eval('('+json+')'); var feed = ig.FeedData(results.rss.channel.item); var ledes = feed.slice(0,summariesLimit); var headlines = feed.slice(summariesLimit,headlineLimit); _gel("lede").innerHTML = tmpl(_gel("summariesTemplate").value, {stories:ledes}); _gel("headlines_list").innerHTML = tmpl(_gel("headlinesTemplate").value, {stories:headlines}); _IG_AdjustIFrameHeight();//gadgets.window.adjustHeight(); }); </script>
]]>
</Content>
<Content type="html" view="home">
<![CDATA[
<link rel="stylesheet" type="text/css" href="http://graphics8.nytimes.com/css/app/igoogle/home-merged.css?13" /> <textarea style="display:none" id="summariesTemplate"> <% for (var i=0, len=stories.length; i<len; i++) { %> <% var story = stories[i]; %> <div class="story clearfix"> <% if (story.thumbnail) { %> <div class="callout"> <img src="<%= story.thumbnail %>" /> </div> <% } %> <h4><a href="<%= story.web_url %>&src=igw" target="_blank"><%= story.hdl %></a></h4> <p class="summary"><%= story.lp %></p> </div> <% } %> </textarea> <textarea style="display:none" id="headlinesTemplate"> <% for (var i=0, len=stories.length; i<len; i++) { %> <% var story = stories[i]; %> <div class="story clearfix"> <a href="<%= story.web_url %>&src=ig" target="_blank"><%= story.hdl %></a> </div> <% } %> </textarea> <div id="content_div"> <div class="contentHolder clearfix" id="lede"></div> <div id="headlines_list" class="clearfix"></div> <div id="switchView"></div> </div> <script src="http://graphics8.nytimes.com/js/app/igoogle/igoogle.js"></script> <script> var ig = NYT.Google; //ig.getJSON("http://www.nytimes.com/services/xml/rss/nyt/HomePage.json?211", function(json) { _IG_FetchContent("http://www.nytimes.com/services/json/nyt/HomePage.json", function(json) { var prefs = new _IG_Prefs(); var headlineLimit = prefs.getInt("headlineCount"); var summariesLimit = prefs.getInt("summaryCount"); var results = eval('('+json+')'); var feed = ig.FeedData(results.rss.channel.item); var ledes = feed.slice(0,summariesLimit); var headlines = feed.slice(summariesLimit,headlineLimit); _gel("lede").innerHTML = tmpl(_gel("summariesTemplate").value, {stories:ledes}); _gel("headlines_list").innerHTML = tmpl(_gel("headlinesTemplate").value, {stories:headlines}); _gel("switchView").innerHTML = '<a href="javascript:NYT.Google.switchView(\'canvas\')">More news &raquo;</a>'; _IG_AdjustIFrameHeight();//gadgets.window.adjustHeight(); }); </script>
]]>
</Content>
<Content type="html" view="canvas">
<![CDATA[
<link rel="stylesheet" type="text/css" href="http://graphics8.nytimes.com/css/app/igoogle/canvas-merged.css?12" /> <textarea style="display:none" id="columnTemplate"> <% for (var i=0, len=stories.length; i<len; i++) { %> <% var story = stories[i]; %> <div class="story clearfix"> <% if (story.thumbnail) { %> <div class="callout"> <img src="<%= story.thumbnail %>" height="75" width="75" /> </div> <% } %> <h5><a href="<%= story.web_url %>&src=ig" target="_blank"><%= story.hdl %></a></h5> <div class="byline"><%= story.byl %></div> <p class="summary"><%= story.lp %></p> </div> <% } %> </textarea> <textarea style="display:none" id="mostEmailedTemplate"> <ol class="mostPopList"> <% for (var i=0, len=stories.length; i<len; i++) { %> <% var story = stories[i]; %> <li> <p><a href="<%= story.web_url %>&src=ig" target="_blank"><%= story.hdl %></a></p> </li> <% } %> </ol> <a href="http://www.nytimes.com/gst/mostemailed.html" class="more" target="_blank">Go to Complete List &raquo;</a> </textarea> <div id="shell"> <div id="main"> <div id="mast"> <div id="logo"><a href="http://nytimes.com?src=ig" target="_blank"><img src="http://graphics8.nytimes.com/packages/html/igoogle/nytlogo301x44.png" /></a></div> </div> <div id=content_div> <div id="abcol"> <div id="acol"> <h4><a href="http://nytimes.com?src=ig" target="_blank">LATEST HEADLINES&nbsp;&raquo;</a></h4> <div class="columnGroup" id="homepageContent"></div> <div style="clear:right">&nbsp;</div> </div> <div id="bcol"> <h4><a href="http://nytimes.com/business?src=ig" target="_blank">BUSINESS&nbsp;&raquo;</a></h4> <div class="columnGroup" id="businessContent"></div> <h4><a href="http://nytimes.com/technology?src=ig" target="_blank">TECHNOLOGY&nbsp;&raquo;</a></h4> <div class="columnGroup" id="technologyContent"></div> </div> </div> <div id="ccol"> <h4><a href="http://nytimes.com/opinion?src=ig" target="_blank">OPINION&nbsp;&raquo;</a></h4> <div class="columnGroup" id="opinionContent"></div> <div id="multiPlayer" class="columnGroup"> <!--brightcove code starts here 9/30/08 build//--> <script type="text/javascript" src="http://graphics8.nytimes.com/bcvideo/1.0/iframe/embed.js"></script> <script type="text/javascript"> NYT_VideoPlayerStart( { playerType : "homepage", playlistId : "1194811622188" } ); </script> <!--brightcove code ends here //--> </div> <h4><a href="http://www.nytimes.com/gst/mostpopular.html" target="_blank">MOST POPULAR&nbsp;&raquo;</a></h4> <div id="mostPopWidget" class="columnGroup"> <div id="tabsContainer"> <ul class="tabs"> <li class="selected">Emailed</li> <!--li>Shared</li--> </ul> </div> <div id="mostEmailed" class="tabContent tabContentActive" style="display:block"></div> <!--div id="mostShared" class="tabContent"></div--> </div> <div class="columnGroup" id="promo"> </div> </div> </div> <div id="footer"> <a href="http://www.nytimes.com/pages/world/index.html?src=ig" target="_blank">World</a> | <a href="http://www.nytimes.com/pages/national/index.html?src=ig" target="_blank">U.S.</a> | <a href="http://www.nytimes.com/pages/nyregion/index.html?src=ig" target="_blank">N.Y. / Region</a> | <a href="http://www.nytimes.com/pages/business/index.html?src=ig" target="_blank">Business</a> | <a href="http://www.nytimes.com/pages/technology/index.html?src=ig" target="_blank">Technology</a> | <a href="http://www.nytimes.com/pages/science/index.html?src=ig" target="_blank">Science</a> | <a href="http://health.nytimes.com/pages/health/index.html?src=ig" target="_blank">Health</a> | <a href="http://www.nytimes.com/pages/sports/index.html?src=ig" target="_blank">Sports</a> | <a href="http://www.nytimes.com/pages/opinion/index.html?src=ig" target="_blank">Opinion</a> | <a href="http://www.nytimes.com/pages/arts/index.html?src=ig" target="_blank">Arts</a> | <a href="http://www.nytimes.com/pages/style/index.html?src=ig" target="_blank">Style</a> | <a href="http://travel.nytimes.com/pages/travel/index.html?src=ig" target="_blank">Travel</a> </div> <div style="clear:both; font-size: 1px">&nbsp;</div> </div> </div> <img src="http://statse.webtrendslive.com/dcsoy2de300000ch9g4qg9oct_9j4x/dcs.gif?dcsuri=google-widget.php&dcsdat=1068089121752&WT.ti=Google-Widget-Canvas&WT.z_dcsm=1" /> <script src="http://graphics8.nytimes.com/js/app/igoogle/igoogle.js"></script> <script src="http://www.nytimes.com/adx/bin/adx_remote.html?type=fastscript&page=www.google.com/ig&posall=BigAdGoogle,Inv1,Inv2,Inv3&query=qstring&keywords=?"></script> <script> //new Accordian("mostPopWidget"); var ig = NYT.Google; // Home Page //ig.getJSON("http://query.nytimes.com/svc/search/articles/igoogle", function(json) { _IG_FetchContent("http://www.nytimes.com/services/json/nyt/HomePage.json", function(json) { var results = eval('('+json+')'); var homePageFeed = ig.FeedData(results.rss.channel.item); _gel("homepageContent").innerHTML = tmpl(_gel("columnTemplate").value, {stories:homePageFeed.slice(0,14)}); // Business _IG_FetchContent("http://www.nytimes.com/services/json/nyt/Business.json", function(json) { var results = eval('('+json+')'); console.log(ig); var feed = ig.dedupe(homePageFeed, ig.FeedData(results.rss.channel.item)); _gel("businessContent").innerHTML = tmpl(_gel("columnTemplate").value, {stories:feed.slice(0,6)}); _IG_AdjustIFrameHeight();//gadgets.window.adjustHeight(); }); _IG_AdjustIFrameHeight(); }); // Technology _IG_FetchContent("http://www.nytimes.com/services/json/nyt/Technology.json", function(json) { var results = eval('('+json+')'); var feed = ig.FeedData(results.rss.channel.item); _gel("technologyContent").innerHTML = tmpl(_gel("columnTemplate").value, {stories:feed.slice(0,6)}); _IG_AdjustIFrameHeight(); }); // Opinion _IG_FetchContent("http://www.nytimes.com/services/json/nyt/Opinion.json", function(json) { var results = eval('('+json+')'); var feed = ig.FeedData(results.rss.channel.item); var editorials =[]; var opeds = []; for (var i=0, len=feed.length; i<len; i++) { var item = feed[i]; if (item.hdl.match(/Editorial/i)) { editorials.push(item); } else if(item.hdl.match(/(Op-Ed|Columnist)/i)) { opeds.push(item); } } var columnHtml = tmpl(_gel("columnTemplate").value, {stories:opeds.slice(0, 2)}); var editorialHtml = tmpl(_gel("columnTemplate").value, {stories:editorials.slice(0,2)}); _gel("opinionContent").innerHTML = columnHtml + editorialHtml; _IG_AdjustIFrameHeight(); }); // Most Emailed - (Fetch after opinion); _IG_FetchContent("http://www.nytimes.com/services/json/nyt/MostEMailed.json", function(json) { var results = eval("("+json+")"); var ig = NYT.Google; var feed = ig.FeedData(results.rss.channel.item).slice(0, 10); _gel("mostEmailed").innerHTML = tmpl(_gel("mostEmailedTemplate").value, {stories:feed}); _IG_AdjustIFrameHeight(); //gadgets.window.adjustHeight(); }); // The Big Ad if (typeof adxpos_BigAdGoogle != "undefined") { _gel("promo").innerHTML = adxads[0]; } </script>
]]>
</Content>
</Module>
